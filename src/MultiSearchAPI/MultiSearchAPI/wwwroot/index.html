<!DOCTYPE html>
<html lang="pt-br" ng-app="MultiSearchApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MultiSearch</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body ng-controller="MultiSearchController" class="container mt-5">
    <h2 class="text-center">Produtos</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Preço</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="produto in produtos">
                <td>{{ produto.id }}</td>
                <td>{{ produto.nome }}</td>
                <td>R$ {{ produto.preco.toFixed(2) }}</td>
            </tr>
        </tbody>
    </table>

    <h2 class="text-center mt-5">Equipamentos</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="equipamento in equipamentos">
                <td>{{ equipamento.equipmentID }}</td>
                <td>{{ equipamento.equipmentName }}</td>
            </tr>
        </tbody>
    </table>

    <h2 class="text-center mt-5">Materiais</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="material in materials">
                <td>{{ material.materialID }}</td>
                <td>{{ material.materialName }}</td>
            </tr>
        </tbody>
    </table>

    <h2 class="text-center mt-5">Pedidos de Compra</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Data de Entrega</th>
                <th>Fornecedor</th>
                <th>Material ID</th>
                <th>Material</th>
                <th>Quantidade</th>
                <th>Custo Total</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="pedido in purchaseOrders">
                <td>{{ pedido.purchaseOrderID }}</td>
                <td>{{ pedido.deliveryDate }}</td>
                <td>{{ pedido.supplier }}</td>
                <td>{{ pedido.materialID }}</td>
                <td>{{ pedido.materialName }}</td>
                <td>{{ pedido.quantity }}</td>
                <td>R$ {{ pedido.totalCost.toFixed(2) }}</td>
            </tr>
        </tbody>
    </table>

    <h2 class="text-center mt-5">Pedidos de Venda</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Data de Entrega</th>
                <th>Cliente</th>
                <th>Material ID</th>
                <th>Material</th>
                <th>Quantidade</th>
                <th>Valor Total</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="pedido in salesOrders">
                <td>{{ pedido.salesOrderID }}</td>
                <td>{{ pedido.deliveryDate }}</td>
                <td>{{ pedido.customer }}</td>
                <td>{{ pedido.materialID }}</td>
                <td>{{ pedido.materialName }}</td>
                <td>{{ pedido.quantity }}</td>
                <td>R$ {{ pedido.totalValue.toFixed(2) }}</td>
            </tr>
        </tbody>
    </table>

    <h2 class="text-center mt-5">Mão de Obra</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Turno</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="membro in workforce">
                <td>{{ membro.workforceID }}</td>
                <td>{{ membro.name }}</td>
                <td>{{ membro.shift }}</td>
            </tr>
        </tbody>
    </table>

    <script>
        var app = angular.module("MultiSearchApp", []);
        app.controller("MultiSearchController", function ($scope, $http) {
            $http.get("http://localhost:5099/api/produtos")
                .then(function (response) { $scope.produtos = response.data; })
                .catch(function (error) { console.error("Erro ao buscar produtos", error); });

            $http.get("http://localhost:5099/api/equipments")
                .then(function (response) { $scope.equipamentos = response.data; })
                .catch(function (error) { console.error("Erro ao buscar equipamentos", error); });

            $http.get("http://localhost:5099/api/materials")
                .then(function (response) { $scope.materials = response.data; })
                .catch(function (error) { console.error("Erro ao buscar materiais", error); });

            $http.get("http://localhost:5099/api/purchaseorders")
                .then(function (response) { $scope.purchaseOrders = response.data; })
                .catch(function (error) { console.error("Erro ao buscar pedidos de compra", error); });

            $http.get("http://localhost:5099/api/salesorders")
                .then(function (response) { $scope.salesOrders = response.data; })
                .catch(function (error) { console.error("Erro ao buscar pedidos de venda", error); });

            $http.get("http://localhost:5099/api/workforce")
                .then(function (response) { $scope.workforce = response.data; })
                .catch(function (error) { console.error("Erro ao buscar mão de obra", error); });
        });
    </script>
</body>
</html>
